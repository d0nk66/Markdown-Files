​	最近一直在搞单片机啊，做梦都是单片机，受不了。先把一些名词解释放在这（不写下来老是忘）

|       名词        |                           解释                           |
| :---------------: | :------------------------------------------------------: |
|        GNU        |     开源项目，提供了完整的操作系统组件，旨在替代Unix     |
|      OpenOCD      |         开源的嵌入式芯片调试器，支持JTAG/SWD编程         |
|       CMake       | 跨平台的编译工具，可以用简单的语句描写所有平台的编译过程 |
| gcc-arm-none-eabi |      专用于Arm架构芯片的交叉编译工具链，支持多平台       |

​	之前复刻稚晖君的[ **ElectronBot** ](https://github.com/peng-zhihui/ElectronBot)的时候装了一个Clion，起初还嫌他事多，好好的keil放那不用，偏偏要配置这么花里胡哨的IDE，当时按着他的[**教程**](https://zhuanlan.zhihu.com/p/145801160)配置ARM开发工具链、MinGW开发环境和OpenOCD。

​	其实配到一半的时候我就已经要抓狂了，在配置ARM开发工具链的时候（`gcc-arm-none-eabi`）明明已经配好了，但是C++编译器下面一直在转圈（如图）

<img src="https://www.helloimg.com/i/2025/05/27/6834c92e3f72f.png" alt="" style="zoom:75%;" />

​	当时试了很多方法都没用，最后排除掉所有原因，只可能是学习版失效了（孩子没钱买正版）。没办法了，只能重装了，但是当时我光是配置开发环境就已经焦头烂额了，重装更是一点都不想搞，自此这个项目就先搁置了（孩子脑容量实在有限，得花点时间消化一下）。

---

​	最近要结项了，组长催我继续搞这些东西，无奈只好重新开始弄。

​	这次选的不是CSDN上面的安装包，我从软件管家（一个微信公众号）下的，他家的学习版软件很好使，Adobe全家桶和JetBrains全家桶用起来都没什么问题。

​	重装过后倒是没有那个转圈图标了，说明成功识别到编译器了。

​	倒腾了一晚上，天蒙蒙亮的时候，我突然就点亮了那个屏幕（之前稚晖的Sample.exe从来没有运行成功过），那一刻的欣喜之情真的言语表达不出来的。

![点亮屏幕的照片](https://www.helloimg.com/i/2025/05/27/6834cd23a6887.jpg)

​	由于之前已经配置好了开发环境，所以这次编译下载一条龙，一次成功。这里要特别感谢up主[数码甲鱼的简单生活](https://space.bilibili.com/1668139036)录制的一系列教学视频，跟着他的视频走几乎可以排除99%以上的错误。

​	搞单片机每次看到报错都会冒冷汗，我一开始不知道OpenOCD的控制台Info是红色的，以为是报错，查完发现原来那是OpenOCD烧写程序输出的日志，虚惊一场。

​	话说回来，最近用了Clion之后才发现，这个东西是真的好用啊，用了就回不去了，提示确实很智能啊，看着还赏心悦目，墙裂推荐。教程在文章开头的超链，按住Ctrl用左键点它可以直接跳转。

---

​	不过今天用Clion+CubeMX开发的时候犯了一个很低级的错误。既然是做实验，那就必然少不了这一块元老级的板子——STM32F103C8T6，讲真，这块芯片只比我小三岁。用CubeMX配置工程的一般步骤：打开高速晶振，打开低速晶振，配置时钟树，我甚至还贴心地打开了GPIOC的13号引脚（核心板上的一个LED灯），初始化电平为Low。但是我忘了一个很重要的事情，我没有打开它的Debug引脚，它对应的是SWD，也就是连接stlink的SWCLK和SWDIO的引脚。

​	第一次下载程序成功了，灯亮了，但是我重写了一个闪灯的程序想要下载进去的时候，却发现电脑怎么也识别不到芯片了，就连用Keil下载程序也会提示`No Target Connect`，我又是各种尝试哈，甚至重装了stlink的驱动，还把一个stlink的固件版本从V2J46S7降级到V2J43S7，还是不行。没法了，上CSDN查查吧，看到有个解决办法是把BOOT0拉高，我抱着死马当活马医的心态试了一下，结果还真成了，只不过在烧写完程序后需要把BOOT0拉低，然后重新上电才能运行代码。

​	找了一圈，发现CubeMX里没打开Debug引脚，所以从Flash启动的话，stlink的SWCLK和SWDIO都相当于悬空，所以识别不到芯片。而把BOOT0拉高之后，进入Bootloader模式，Bootloader模式是默认启用SWD的，这时候就能识别到芯片了。只不过Bootloader模式不会运行用户代码，所以需要把BOOT0重新拉低，重启才能看到闪灯。

​	正常开发谁要是敢给Debug配成No Debug，可有他好果汁。